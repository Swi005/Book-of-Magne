\documentclass[tikz, border=5mm, a4paper]{book}

\usepackage{geometry}
\usepackage{amsmath}
\usepackage{hyperref}
\usepackage{blindtext}
\usepackage{graphicx}
\usepackage{listings}%For code do \begin{lstlisting}
\usepackage{color}
\usepackage{tikz-cd}
\usepackage{tikz}
\usepackage{float}
\usepackage{glossaries}
\usepackage{fancyhdr}
\usepackage{cleveref}
\usepackage{epigraph}
\usepackage{bytefield}
\usepackage{etoolbox}


\usetikzlibrary{arrows, arrows.meta, backgrounds, shapes, automata, petri, positioning, calc, chains, decorations.pathmorphing, fit, decorations.pathreplacing}


\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstset{frame=tb,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=left,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}


\fancypagestyle{IHA-fancy-style}{%
  \pagestyle{fancy}
  \fancyhead{}
  \rhead{\rightmark}
  \lhead{\leftmark}
  \fancyfoot{}
  \fancyfoot[LE,RO]{\thepage}
}

% Redefine the plain page style
\fancypagestyle{plain}{%
  \pagestyle{fancy}
  \fancyhead{}
  \fancyfoot{}
  \fancyfoot[LE,RO]{\thepage}
}

\bibliographystyle{plain}

\makeatletter
\patchcmd{\chapter}{\if@openright\cleardoublepage\else\clearpage\fi}{}{}{}
\makeatother

\DeclareRobustCommand{\comment}[1]{
    {\color{orange}\emph{#1}}
}


\input{chapters/glossary.tex}
\input{figures/j√∏rn.tex}

\newcommand{\alg}[2]{[\![#1]\!]_{#2}}

\newcommand{\descbox}[2]{\parbox[c][3.8\baselineskip]{0.95\width}{%
    % facilitates the creation of memory maps. Start address at the bottom,
    % end address at the top.
    % syntax:
    % \memsection{end address}{start address}{height in lines}{text in box}
}}
\newcommand{\memsection}[4]{%
  % define the height of the memsection
  \bytefieldsetup{bitheight=#3\baselineskip}%
  \bitbox[]{10}{%
    \texttt{#1}% print end address
    \\
    % do some spacing
    \vspace{#3\baselineskip}
    \vspace{-2\baselineskip}
    \vspace{-#3pt}
    \texttt{#2}% print start address
  }%
  \bitbox{16}{#4}% print box with caption
}

%
\begin{document}

    
    %Frontpage 
    \include{chapters/frontpage.tex}
    \pagestyle{IHA-fancy-style}
    %\newpage
    %\thispagestyle{empty} 

    %\fancyfoot{}
    %\fancyfoot[LO,RE]{\thepage}

    \frontmatter
    \addcontentsline{toc}{chapter}{Table of Contents}
    \tableofcontents
    \newpage
    
    \mainmatter
    \addcontentsline{toc}{chapter}{Preface}
    \include{chapters/00_preface.tex}
    \newpage
    
    \include{chapters/01_languages.tex}
    \newpage
    
    \include{chapters/02_anatomy.tex}
    \newpage
    
    \include{chapters/03_store_state_storage.tex}
    \newpage
    
    \include{chapters/04_procedures.tex}
    \newpage

    \include{chapters/05_signatures.tex}
    \newpage

    %\include{chapters/06_mdcs.tex}
    %\newpage

    \include{chapters/AA_Assertions.tex}
    \newpage

    \include{chapters/BB_Language_standards.tex}
    \newpage

    %\glsaddall
    %\printglossary[title=Glossary,toctitle=Glossary]
    %\printglossaries
    \addcontentsline{toc}{chapter}{Glossary}
    \printnoidxglossaries
    
    \addcontentsline{toc}{chapter}{Bibliography}
    \bibliography{main}
\end{document}